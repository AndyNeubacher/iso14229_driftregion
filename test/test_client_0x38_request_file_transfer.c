#include "test/env.h"

int main() {
    UDSClient_t client;
    {
        ENV_CLIENT_INIT(client);

        EXPECT_OK(UDSSendRequestFileTransfer(&client, kAddFile, "/data/testfile.zip", 0x00, 3, 0x112233, 0x001122));

        const uint8_t ADDFILE_REQUEST[] = {0x38, 0x01, 0x00, 0x12, 0x2F, 0x64, 0x61, 0x74, 0x61, 0x2F, 0x74, 0x65,
                                            0x73, 0x74, 0x66, 0x69, 0x6C, 0x65, 0x2E, 0x7A, 0x69, 0x70, 0x00, 0x03, 
                                            0x11, 0x22, 0x33, 0x00, 0x11, 0x22};
        TEST_MEMORY_EQUAL(client.send_buf, ADDFILE_REQUEST, sizeof(ADDFILE_REQUEST));
    }
    {
        ENV_CLIENT_INIT(client);
        
        EXPECT_OK(UDSSendRequestFileTransfer(&client, kDeleteFile, "/data/testfile.zip", 0x00, 0, 0, 0));

        const uint8_t DELETEFILE_REQUEST[] = {0x38, 0x02, 0x00, 0x12, 0x2F, 0x64, 0x61, 0x74, 0x61, 0x2F, 0x74, 0x65,
                                            0x73, 0x74, 0x66, 0x69, 0x6C, 0x65, 0x2E, 0x7A, 0x69, 0x70};
        TEST_MEMORY_EQUAL(client.send_buf, DELETEFILE_REQUEST, sizeof(DELETEFILE_REQUEST));
    }
}